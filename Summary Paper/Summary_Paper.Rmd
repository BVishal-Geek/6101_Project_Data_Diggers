---
title: "Summary Paper: Evaluating Asteroid Characteristics and Predicting Hazard Levels Using NASA's Asteroid Classification Dataset"
author: "Vishal Bakshi, Pratiksha Dange, Sudanshu Dotel, Qibin Huang"
date: "`r Sys.Date()`"
output: 
  prettydoc::html_pretty:
    theme: cayman
    toc: yes
---

## 1. ABSTRACT 

<span style="font-size: 20px;">
Asteroids, celestial bodies hurtling through space, have long captured the curiosity of scientists and the imagination of the public. Their potential threat to our planet has led to extensive research and monitoring efforts. This project delves into the realm of NASA's Asteroid Classification, a comprehensive repository of information on near-Earth objects (NEOs), aiming to determine whether an asteroid is hazardous or not.
<P>The objective of this project is understanding the various physical and orbital characteristics of NEOs, identifying the most critical variables impacting asteroid classification between hazardous and non-hazardous asteroids. We explore a diverse set of factors, including an asteroid's size, speed, orbital characteristics, and proximity to Earth, to make this critical determination.
<P>In an age where space exploration and planetary defense are of paramount importance, the ability to accurately classify and predict the hazard level of asteroids holds significant value. This project is not only academically intriguing but also serves as a practical step towards safeguarding our planet from potential cosmic threats.
<P>By leveraging data provided by NASA and employing EDA (Exploratory Data Analysis), we aim to contribute to our understanding of asteroid dynamics and risk assessment. The findings of this project have the potential to influence space policy, planetary defense strategies, and the broader field of astronomy.
<P>
The project's abstract sets the stage for a comprehensive investigation into NASA's Asteroid Classification and its implications, showcasing the project's significance in the realm of space science and planetary safety.</P>
</span>

## 2. INTRODUCTION 
<span style="font-size: 20px;">
Imagine the vastness of outer space, with its countless stars and planets. Among the many things that roam the cosmic wilderness, asteroids have always stood out. These chunks of rock have not only fueled our imagination but also raised important questions about our safety here on Earth.
<p>One big question is whether some asteroids could be a danger to us. To answer this, NASA has a project that tries to sort asteroids into two groups: those that could be hazardous and those that are not.

<p>**Getting to Know Asteroids:**
<p>Before we delve into this project, let's first grasp what asteroids are. Giuseppe was the first to discover an asteroid, Ceres, orbiting between Mars and Jupiter. Since then, various space organizations, including NASA, have diligently studied these celestial objects. 
<p>Asteroids, often referred to as minor planets, primarily reside in the inner Solar System. Some of the larger ones have even earned the nickname "planetoids." It's important to note that the number of asteroids is immense, with millions of them scattered throughout space.
<p>Think of asteroids as space rocks that journey around the Sun. They primarily occupy an area known as the asteroid belt, a celestial highway situated between Mars and Jupiter. These asteroids come in different sizes. While some are small and pose no threat, others are substantial and could potentially have a significant impact on Earth.
<p>**Prior Research:**
<P>Previous research and analysis have extensively explored the classification of asteroids and their potential hazards. Scientists and space agencies, including NASA, have been actively engaged in studying asteroids to understand their characteristics and predict their behavior. 
<p>This research covered asteroid classification, orbital dynamics, impact risk assessment, deflection strategies, asteroid databases, space missions, and planetary defense strategies.
<p> Overall, the existing body of research serves as a foundation for our current investigation, providing valuable insights and knowledge to build upon. We aim to contribute to this body of work by applying our data science learnings to enhance asteroid classification and hazard prediction.</P>
<p>**Significance of the Research: **
<p>Our choice of delving into the fascinating world of asteroids extends beyond mere scientific curiosity. It's a mission to ensure the safety of our planet. By undertaking the task of studying and classifying asteroids, we're not only satisfying our collective fascination with space but, more importantly, we're getting ready for the unknown things that space might bring us one day. It's not just a fun thing to do; it's about making sure our home is safe from unexpected space events.

<p>Our team's motivation stems from a blend of personal interest and the broader need of planetary security. Recent news about an [Asteroid that passes nearby could hit Earth in the future, NASA says](https://abcnews.go.com/US/asteroid-passes-nearby-hit-earth-future-nasa/story?id=103322457#:~:text=Interest%20Successfully%20Added-,Asteroid%20that%20passes%20nearby%20could%20hit%20Earth%20in%20the%20future,could%20hit%20Earth%20by%202182.&text=What%20is%20an%20asteroid%3F,about%20329%20miles%20in%20diameter.), served as a sobering reminder of the significance of this topic. Each member of our team shares a personal curiosity to explore the depths of space, making the choice to investigate asteroids even more interesting.

<p>As a data science enthusiast, we wanted to explore the EDA to predict the hazardous nature of these space rocks. This led us to explore resources like Kaggle, where we stumbled upon NASA's comprehensive dataset. This dataset, a treasure trove of information on various asteroids, distinguishes them as hazardous or non-hazardous, opening doors to a wealth of possibilities for our research. 
<p> Now let us look at the dataset.
</span>


## 3. DATASET 
<span style="font-size: 20px;">
<p>Our dataset is available as [Nasa Asteroids Classification](https://www.kaggle.com/datasets/shrutimehta/nasa-asteroids-classification) at Kaggle. All the data is from the (http://neo.jpl.nasa.gov/). This API is maintained by Space Rocks Team: David Greenfield, Arezu Sarvestani, Jason English, and Peter Baunach. The dataset consists of 4687 data instances(rows) and 40 features(columns). Also, there are no null values in the dataset.
<P>
<p>Featuresâ€™ description is given below;
</span>


<div class="column-definitions">
  <p><strong>1. Neo Reference ID:</strong> ID for the Asteroid</p>
  <p><strong>2. Name:</strong> Name of the Asteroid</p>
  <p><strong>3. Absolute Magnitude:</strong> Indicates the brightness of the asteroid; lower magnitude means a brighter star, higher magnitude means a dimmer star.</p>
  <p><strong>4. Est Dia in KM (min):</strong> Estimated minimum size of the asteroid in kilometers.</p>
  <p><strong>5. Est Dia in KM (max):</strong> Estimated maximum size of the asteroid in kilometers.</p>
  <p><strong>6. Close Approach Date:</strong> Date when the asteroid came very close to Earth's atmosphere.</p>
  <p><strong>7. Epoch Date Close Approach:</strong> A related date concerning the asteroid's close approach.</p>
  <p><strong>8. Relative Velocity (km per sec):</strong> The velocity of the asteroid.</p>
  <p><strong>9. Miss Dist. (Astronomical):</strong> The asteroid's closest approach to Earth, measured in astronomical units.</p>
  <p><strong>10. Miss Dist. (lunar):</strong> The distance in terms of the Moon's distance from Earth.</p>
  <p><strong>11. Miss Dist. (kilometers):</strong> The closest approach of the asteroid to Earth in kilometers.</p>
  <p><strong>12. Miss Dist. (miles):</strong> The closest approach in miles.</p>
  <p><strong>13. Orbiting Body:</strong> Indicates the celestial body that the asteroid orbits.</p>
  <p><strong>14. Orbit ID:</strong> An ID for the asteroid's orbit.</p>
  <p><strong>15. Orbit Determination Date:</strong> The date when the asteroid's orbit was calculated.</p>
  <p><strong>16. Orbit Uncertainty Minimum:</strong> A measure of the uncertainty in the asteroid's orbit.</p>
  <p><strong>17. Orbit Intersection:</strong> Indicates where the asteroid's orbit crosses.</p>
  <p><strong>18. Jupiter Tisserand Invariant:</strong> The JTI measures the influence of Jupiter's gravitational pull on celestial bodies; lower JTI values are farther from Jupiter.</p>
  <p><strong>19. Epoch Osculation:</strong> A specific date related to the asteroid.</p>
  <p><strong>20. Eccentricity:</strong> Determines the shape of the orbit; 0 < E < 1 indicates an ellipse, E = 1 is a parabola, and E > 1 is a hyperbola.</p>
  <p><strong>21. Semi Major Axis:</strong> Indicates the size of the asteroid's orbit.</p>
  <p><strong>22. Inclination:</strong> Denotes the tilt of the asteroid's orbit.</p>
  <p><strong>23. Asc Node Longitude:</strong> Specifies where the asteroid's orbit crosses a reference plane.</p>
  <p><strong>24. Orbital Period:</strong> Specifies how long it takes for the asteroid to complete one orbit.</p>
  <p><strong>25. Perihelion Distance:</strong> Indicates how close the asteroid gets to the Sun during its orbit.</p>
  <p><strong>26. Perihelion Arg:</strong> A measure related to the direction of the asteroid's orbit.</p>
  <p><strong>27. Aphelion Dist:</strong> Specifies how far the asteroid is from the Sun during its orbit.</p>
  <p><strong>28. Perihelion Time:</strong> The time when the asteroid is closest to the Sun.</p>
  <p><strong>29. Mean Anomaly:</strong> A measure of where the asteroid is in its orbit.</p>
  <p><strong>30. Mean Motion:</strong> Provides information about how the asteroid moves in its orbit.</p>
  <p><strong>31. Equinox:</strong> Specifies the reference point for the orbital information.</p>
  <p><strong>32. Hazardous:</strong> Target variable indicating whether the asteroid is considered hazardous to Earth; 1 for hazardous, 0 for not hazardous.</p>
</div>

<style>
  .column-definitions {
    font-family: Arial, sans-serif;
    padding: 20px;
    border: 1px solid #ccc;
    background-color: #f7f7f7;
  }
</style>


## 4. EDA
```{r init, include=FALSE}
# some of common options (and the defaults) are: 
# include=T, eval=T, echo=T, results='hide'/'asis'/'markup',..., collapse=F, warning=T, message=T, error=T, cache=T, fig.width=6, fig.height=4, fig.dim=c(6,4) #inches, fig.align='left'/'center','right', 
library(ezids)
# knitr::opts_chunk$set(warning = F, results = "markup", message = F)
knitr::opts_chunk$set(warning = F, results = "hide", message = F)
options(scientific=T, digits = 3) 
library(dplyr)
library(kableExtra)
library(ggplot2)

# options(scipen=9, digits = 3)  
# â€˜scipenâ€™: integer. A penalty to be applied when deciding to print numeric values in fixed or exponential notation.  Positive values bias towards fixed and negative towards scientific notation: fixed notation will be preferred unless it is more than â€˜scipenâ€™ digits wider.
# use scipen=999 to prevent scientific notation at all times
```

```{css, include=FALSE}
.columns {display: flex;}
h1 {color: #87CEFA}
h2 {color:blue}
```

### Importing Dataset

```{r, include=TRUE, echo=FALSE, results='asis'}
current_directory <- getwd()
data_path <- "Datasets/Asteroid_Hazard_Classification.csv"
file_path <- file.path(dirname(current_directory), data_path)
Ast_raw <- data.frame(read.csv(file_path))

kable(summary(Ast_raw), "html") %>%
  kable_paper(full_width = FALSE) %>% 
  scroll_box(width = "100%", height = "400px")
```


### Data Preprocessing

### Step : 1 : Converting the Hazard column from string to integer, and into categorical.
Why converting the "Hazardous" colum?:
1.It ensures that the data type of the "Hazardous" column is consistent and suitable for analysis.
2.It can makes the data easier to work with and is a more efficient representation.

```{r, include=TRUE, echo=FALSE, results='asis'}
Ast_raw <- Ast_raw %>%
mutate(Hazardous = as.integer(Hazardous))#(1 is True, 0 is False)
Ast_raw$Hazardous <- as.factor(Ast_raw$Hazardous)

kable((Ast_raw), "html") %>%
  kable_paper(full_width = FALSE) %>% 
  scroll_box(width = "100%", height = "400px")

```
<p>

**Let us now look at the variation in â€˜hazardousâ€™ feature.**

```{r, include=TRUE, echo=FALSE, results='asis'}
library(ggplot2)

# Convert Hazardous column to a factor (if not already)
Ast_raw$Hazardous <- factor(Ast_raw$Hazardous, levels = c(0, 1), labels = c("N", "Y"))

# Create a bar plot with colors
ggplot(data = Ast_raw, aes(x = Hazardous, fill = Hazardous)) +
  geom_bar() +
  labs(title = "Hazardous vs. Non-Hazardous Asteroids",
       x = "Hazardous",
       y = "Count") +
  scale_fill_manual(values = c("Y" = "red", "N" = "blue"))


```
<p>â€¢	The count plot depicts that it is a case of an imbalanced dataset. We have a class which is dominating the other in terms of the number of data entries.
83.89% of the data instances are labelled as 0 (not hazardous) and only
16.10% are labelled as 1 (hazardous).
<p>â€¢	This means that even if we have a broken model that predicts all values as 0(not hazardous), then the accuracy will be 83.89%. So, we cannot merely rely on accuracy to evaluate a classification solely based  on this dataset.


### Step : 2 : Dropping columns which are not required for our analysis:
<p>There are several unnecessary features present in the dataset which hardly contribute towards classification. The features â€˜Nameâ€™ and â€˜Neo Reference IDâ€™ denote the identification number given to an asteroid. These features are not useful for the machine learning model since the name of the asteroid does not contribute to the fact that it is hazardous.
Consider the features:
<P><i>â€˜Est Dia in KM(min)â€™, â€˜Est Dia in KM(max)â€™,<br>
â€˜Est Dia in M(min)â€™, â€˜Est Dia in M(max)â€™,<br>
â€˜Est Dia in Miles(min)â€™, â€˜Est Dia in Miles(max)â€™,<br>
â€˜Est Dia in Feet(min)â€™, â€˜Est Dia in Feet(max)â€™</i><br>

<p>All these features represent the estimated diameter of the asteroid in different units, KM = kilometre, M = meter, etc. This is an excellent example of redundant data since it is the same value represented differently. Such redundancy should be removed. Such as we have removed the redundant columns and used the columns with unit KM, Sec.

<p>We have used below columns to perform EDA and statistical analysis.

```{r, include=TRUE, echo=FALSE, results='asis'}
# Load required libraries
library(knitr)
library(kableExtra)

selected_columns <- c('Neo.Reference.ID', 'Name', 'Absolute.Magnitude', 'Est.Dia.in.KM.min.', 'Est.Dia.in.KM.max.', 'Relative.Velocity.km.per.sec', 'Orbit.Uncertainity', 'Jupiter.Tisserand.Invariant', 'Eccentricity', 'Semi.Major.Axis', 'Inclination', 'Perihelion.Distance', 'Aphelion.Dist', 'Mean.Motion', 'Hazardous')

Ast_Subset <- subset(Ast_raw, select = selected_columns)

# Create a nicely formatted table
kable(Ast_Subset, "html") %>%
  kable_paper(full_width = FALSE) %>% 
  scroll_box(width = "100%", height = "400px")

```

### Step : 3 : Outlier Check: 

```{r, include=TRUE, echo=FALSE, results='asis'}
find_outliers <- function(x) {
  q1 <- quantile(x, 0.25)
  q3 <- quantile(x, 0.75)
  iqr <- q3 - q1
  lower_bound <- q1 - 1.5 * iqr
  upper_bound <- q3 + 1.5 * iqr
  return(x[x < lower_bound | x > upper_bound])
}

# Find and remove outliers in the minimum diameter
outliers_min <- find_outliers(Ast_Subset$Est.Dia.in.KM.min.)
data_cleaned_min <- Ast_Subset[!(Ast_Subset$Est.Dia.in.KM.min. %in% outliers_min), ]

# Find and remove outliers in the maximum diameter
outliers_max <- find_outliers(Ast_Subset$Est.Dia.in.KM.max.)
data_cleaned_max <- Ast_Subset[!(Ast_Subset$Est.Dia.in.KM.max. %in% outliers_max), ]

par(mfrow=c(2,2))

hist(Ast_Subset$Est.Dia.in.KM.min., main="Minimum Diameter", xlab="Est Dia in KM (min)", col="blue")
hist(data_cleaned_min$Est.Dia.in.KM.min., main="Minimum Diameter (Cleaned)", xlab="Est Dia in KM (min)", col="blue")

hist(Ast_Subset$Est.Dia.in.KM.max., main="Maximum Diameter", xlab="Est Dia in KM (max)", col="blue")
hist(data_cleaned_max$Est.Dia.in.KM.max., main="Maximum Diameter (Cleaned)", xlab="Est Dia in KM (max)", col="blue")


# Q-Q plot for minimum asteroid diameter
#original data
qqnorm(Ast_Subset$Est.Dia.in.KM.min.)
qqline(Ast_Subset$Est.Dia.in.KM.min.)
#clean data
qqnorm(data_cleaned_min$Est.Dia.in.KM.min.)
qqline(data_cleaned_min$Est.Dia.in.KM.min.)


# Q-Q plot for maximum asteroid diameter

#original data
qqnorm(Ast_Subset$Est.Dia.in.KM.max.)
qqline(Ast_Subset$Est.Dia.in.KM.max.)
#clean data
qqnorm(data_cleaned_max$Est.Dia.in.KM.max.)
qqline(data_cleaned_max$Est.Dia.in.KM.max.)


shapiro.test(data_cleaned_min$Est.Dia.in.KM.min.)
shapiro.test(data_cleaned_max$Est.Dia.in.KM.max.)

#the p-values for both the minimum and maximum asteroid diameters are less than 2e-16, indicating that the data significantly deviates from a normal distribution.

```
### Step : 4 : Checking for Normal Distribution using QQ-Plot

```{r, include=TRUE, echo=TRUE, results='asis'}

# Load the ggplot2 package
library(ggplot2)

kable(summary(Ast_Subset), "html") %>%
  kable_paper(full_width = FALSE) %>% 
  scroll_box(width = "100%", height = "400px")

# Create a Q-Q plot
qqnorm(Ast_Subset$Perihelion.Distance, main = "Q-Q Plot of Perihelion Distance")

# Add a Q-Q line (e.g., line for the normal distribution)
qqline(Ast_Subset$Perihelion.Distance, distribution = qnorm)


# Create a Q-Q plot
qqnorm(Ast_Subset$Aphelion.Dist, main = "Q-Q Plot of Aphelion Distance")

# Add a Q-Q line (e.g., line for the normal distribution )
qqline(Ast_Subset$Aphelion.Dist, distribution = qnorm)
```


## Data Visualization : 

## Histogram plots to check the distribution

### Part 1: Checking Histograms for Distributions

#### Part 1.1 : Absolute Magnitude, Estimated Diameter (Min), Estimated Diameter (Max) 

```{r, include=TRUE, echo=FALSE, results='asis'}
library(ggplot2)
# Load the tidyr package
library(tidyr)

# Create a histogram for 'Absolute.Magnitude', 'Est.Dia.in.KM.min.', and 'Est.Dia.in.KM.max'
selected_columns_1 <- Ast_Subset[c('Absolute.Magnitude', 'Est.Dia.in.KM.min.', 'Est.Dia.in.KM.max.')]

# Reshape the data into long format
Ast_Subset_long_1 <- pivot_longer(selected_columns_1, 
                                cols = everything(),
                                names_to = "Variable", values_to = "Value")

# Create the histogram
ggplot(Ast_Subset_long_1, aes(x = Value, fill = Variable, color = "black")) +
  geom_histogram(binwidth = 1.0, alpha = 0.7, position = "identity", show.legend = FALSE) +
  facet_wrap(~Variable, scales = "free") +
  labs(title = "Histogram of Absolute Magnitude, Est.Dia.in.KM.min., Est.Dia.in.KM.max", x = "Value", y = "Frequency") +
  scale_fill_manual(values = rainbow(length(unique(Ast_Subset_long_1$Variable))) ) +
  scale_color_manual(values = "black") +
  theme_minimal() +
  theme(legend.position = "right")


```

### Part 1.2 : Histograms for Velocity, Orbit Uncertainity, Jupiter Tisserand Invariant

```{r, include=TRUE, echo=FALSE, results='asis'}


# Create a histogram for 'Relative.Velocity.km.per.sec', 'Orbit.Uncertainity', and 'Jupiter.Tisserand.Invariant'
selected_columns_2 <- Ast_Subset[c('Relative.Velocity.km.per.sec', 'Orbit.Uncertainity', 'Jupiter.Tisserand.Invariant')]

# Reshape the data into long format
Ast_Subset_long_2 <- pivot_longer(selected_columns_2, 
                                cols = everything(),
                                names_to = "Variable", values_to = "Value")

# Create the histogram
ggplot(Ast_Subset_long_2, aes(x = Value, fill = Variable, color = "black")) +
  geom_histogram(binwidth = 1.0, alpha = 0.7, position = "identity", show.legend = FALSE) +
  facet_wrap(~Variable, scales = "free") +
  labs(title = "Histogram of Relative.Velocity.km.per.sec, Orbit.Uncertainity, Jupiter.Tisserand.Invariant", x = "Value", y = "Frequency") +
  scale_fill_manual(values = rainbow(length(unique(Ast_Subset_long_2$Variable))) ) +
  scale_color_manual(values = "black") +
  theme_minimal() +
  theme(legend.position = "right")


```

### Part 1.3 : Histograms for Eccentricity, Semi Major Axis, inclination. 

```{r, include=TRUE, echo=FALSE, results='asis'}

# Create a histogram for 'Eccentricity', 'Semi.Major.Axis', and 'Inclination'
selected_columns_3 <- Ast_Subset[c('Eccentricity', 'Semi.Major.Axis', 'Inclination')]

# Reshape the data into long format
Ast_Subset_long_3 <- pivot_longer(selected_columns_3, 
                                cols = everything(),
                                names_to = "Variable", values_to = "Value")

# Create the histogram
ggplot(Ast_Subset_long_3, aes(x = Value, fill = Variable, color = "black")) +
  geom_histogram(binwidth = 0.1, alpha = 0.7, position = "identity", show.legend = FALSE) +
  facet_wrap(~Variable, scales = "free") +
  labs(title = "Histogram of Eccentricity, Semi.Major.Axis, Inclination", x = "Value", y = "Frequency") +
  scale_fill_manual(values = rainbow(length(unique(Ast_Subset_long_3$Variable))) ) +
  scale_color_manual(values = "black") +
  theme_minimal() +
  theme(legend.position = "right")



```

### Part 1.4 : Histogram for Perihelion Distance, Aphelion Distance, Mean Motion 

```{r, include=TRUE, echo=FALSE, results='asis'}
# Create a histogram for 'Perihelion.Distance', 'Aphelion.Dist', 'Mean.Motion'
selected_columns_4 <- Ast_Subset[c('Perihelion.Distance', 'Aphelion.Dist', 'Mean.Motion')]

# Reshape the data into long format
Ast_Subset_long_4 <- pivot_longer(selected_columns_4, 
                                cols = everything(),
                                names_to = "Variable", values_to = "Value")

# Create the histogram
ggplot(Ast_Subset_long_4, aes(x = Value, fill = Variable, color = "black")) +
  geom_histogram(binwidth = 0.1, alpha = 0.7, position = "identity", show.legend = FALSE) +
  facet_wrap(~Variable, scales = "free") +
  labs(title = "Histogram of Perihelion.Distance, Aphelion.Dist, Perihelion.Time, Mean.Motion", x = "Value", y = "Frequency") +
  scale_fill_manual(values = rainbow(length(unique(Ast_Subset_long_4$Variable))) ) +
  scale_color_manual(values = "black") +
  theme_minimal() +
  theme(legend.position = "right")
```

### Part : 1.5 : Checking if the target variable is symmetrical/ Asymmetrical. 
```{r, include=TRUE, echo=FALSE, results='asis'}

# Create a pie chart for a binary categorical variable
counts <- table(Ast_Subset$Hazardous)

# Assign labels to the counts
labels <- c("Not Hazardous", "Hazardous")

# Create the pie chart
pie(counts, labels = labels, main = "Distribution of Asteroids by Hazardous & Non-Hazardous Status")

```
When going to the distributions of the hazardous column. It is clearly visible that the Non-Hazardous Asteroids are more compared to Hazardous.
The data is Asymmetrical. 
Considering the 3000 minimum rows rule, leveling/making data symmetrical is not a viable option right now. 


## Understanding Patterns With Respect To Domain Knowledge
### Part: 1: JTI vs Eccentricity
```{r, include=TRUE, echo=FALSE, results='asis'}
# Load the ggplot2 package
library(ggplot2)


# Create a scatter plot with color based on a categorical variable
ggplot(Ast_Subset, aes(x = Jupiter.Tisserand.Invariant, y = Eccentricity, color = Hazardous)) +
  geom_point() +
  labs(title = "Scatter Plot of JTI vs Eccentricity with respect to Hazardous", x = "JTI", y = "Eccentricity") +
  scale_color_discrete(name = "JTI vs Eccentricity") 

```
### Part 2 : Perihelion vs Eccentricity With Respect To Hazardous

```{r, include=TRUE, echo=FALSE, results='asis'}
library(plotly)


# Create a 3D scatter plot
plot <- ggplot(Ast_Subset, aes(x = Eccentricity, y = Perihelion.Distance, z = Hazardous, color = Hazardous)) +
  geom_point() +
  labs(title = "3D Scatter Plot of Perihelion Distance vs Eccentricity with respect to Hazardous", x = "Eccentricity", y = "Perihelion Distance", z = "Hazardous") +
  scale_color_discrete(name = "Perihelion Distance vs Eccentricity")

# Convert the ggplot plot to a 3D plotly plot
plotly_plot <- ggplotly(plot)

# Show the interactive 3D plot
plotly_plot

```
According to the domain knowledge/math E(Eccentricity) > 0 forms an elliptical shape. 
As the data is Asymmetrical with 70% (Non-Hazardous) and 30% (Hazardous). We can see more scatter points of Non-Hazardous. 
Whereas, considering the Hazardous Asteroids, Increase in Eccentricity is directly proportional to the change in perihelion distance. 
Perihelion Distance (Closest point to the Sun): When the Perihelion Distance is less, it directly enters into the Hazardous category. 



```{r, include=TRUE, echo=FALSE, results='asis'}

p1 <- ggplot(Ast_Subset, aes(x = as.factor(Hazardous), y = `Perihelion.Distance`)) +
  geom_boxplot(fill= "skyblue") +
  labs(title = "Perihelion Distance vs Hazardous", x = "Hazardous", y = "Perihelion Distance")

p2 <- ggplot(Ast_Subset, aes(x = as.factor(Hazardous), y = `Aphelion.Dist`)) +
  geom_boxplot(fill= "skyblue") +
  labs(title = "Aphelion Distance vs Hazardous", x = "Hazardous", y = "Aphelion Distance")

p1
p2


```

<p>To Statistically Prove it: 

## 5.SMART QUESTIONS 

### SMART Question : 1 : How do the hazard classifications of asteroids relate to their proximity to Earth in terms of Perihelion and Aphelion distances?

<P>**Explaination:** We have noticed a pattern or correlation between an asteroid's hazard classification and its proximity to Earth (measured in Perihelion and Aphelion distances). So we have formulated this question to investigate this relationship further.
<P>


**Null Hypothesis **: There is no significant difference in perihelion distance for hazardous and non-hazardous asteroids.
**Alternate Hypothesis **: There is significant difference in perihelion distance for hazardous and non-hazardous asteroids. 

```{r, include=TRUE, echo=FALSE, results='asis'}
t_test_perihelion <- t.test(`Perihelion.Distance` ~ Hazardous, data = Ast_Subset)
t_test_aphelion <- t.test(`Aphelion.Dist` ~ Hazardous, data = Ast_Subset)

```

```{r, include=TRUE, echo=FALSE, results='asis'}
# Show the results
print(t_test_perihelion)
```

```{r, include=TRUE, echo=FALSE, results='asis'}
# Show the results
print(t_test_aphelion)
```
**Observation: **

Perihelion Distance: P-Value < Alpha Value. So, we reject null hypothesis. 
There is an observable trend where hazardous asteroids tend to exhibit smaller perihelion distances when compared to their non-hazardous counterparts.

Aphelion Distance: A subtle yet statistically significant variation emerges, with asteroids possessing higher aphelion distances demonstrating a slightly increased likelihood of being classified as hazardous. Nevertheless, it's important to note that the means of the two groups remain closely aligned. Thus, we cannot definitively attribute higher aphelion distance as the sole determinant of an asteroid's hazardous classification.


```{r, include=TRUE, echo=FALSE, results='asis'}
# Create a 3D scatter plot
plot <- ggplot(Ast_Subset, aes(x = Eccentricity, y = Aphelion.Dist, z = Hazardous, color = Hazardous)) +
  geom_point() +
  labs(title = "3D Scatter Plot of Aphelion Distance vs Eccentricity with respect to Hazardous", x = "Eccentricity", y = "Aphelion Distance", z = "Hazardous") +
  scale_color_discrete(name = "Aphelion Distance vs Eccentricity")

# Convert the ggplot plot to a 3D plotly plot
plotly_plot <- ggplotly(plot)

# Show the interactive 3D plot
plotly_plot


```

Eccentricity is directly proportional to the aphelion distance. Less the Eccentricity, more the circular orbit and less the Aphelion Distance. 
According to the plot, majority of the plots are overlapped, so Aphelion distance alone is not effecting the asteroid to be Hazardous. 


```{r, include=TRUE, echo=FALSE, results='asis'}
library(ggplot2)
library(tidyr)


# List of variables for density plots
variables <- c('Absolute.Magnitude', 
               'Relative.Velocity.km.per.sec', 'Jupiter.Tisserand.Invariant', 
               'Inclination', 'Mean.Motion')

# Create density plots for each variable
for (variable in variables) {
  p <- ggplot(Ast_Subset, aes_string(x = variable, fill = 'Hazardous')) +
    geom_density(alpha = 0.5) +
    labs(title = paste('Density Plot of', variable),
         x = variable,
         y = 'Density') +
    theme_minimal()
  
  print(p)
}
```

**Absolute Magnitude Observation:** Hazardous asteroids tend to have a lower absolute magnitude. Explanation: Absolute magnitude is a measure of an asteroidâ€™s brightness. A lower absolute magnitude indicates a brighter object. Since hazardous asteroids are often closer to Earth, they may appear brighter, resulting in a lower absolute magnitude.

**Relative Velocity km per sec Observation:** Hazardous asteroids have a wider range of relative velocities. Explanation: This suggests that hazardous asteroids can be traveling at a variety of speeds relative to Earth. Higher speeds could increase the potential hazard of an asteroid.

**Jupiter Tisserand Invariant Observation:** The distribution seems quite similar for both hazardous and non-hazardous asteroids. Explanation: The Jupiter Tisserand Invariant is used to differentiate between asteroids and Jupiter-family comets. The similar distribution suggests that this variable alone might not be a strong predictor of an asteroidâ€™s hazardous classification.

**Inclination Observation:** Hazardous asteroids have a wider range of inclinations. Explanation: Inclination is the tilt of an asteroidâ€™s orbit plane. A wider range of inclinations for hazardous asteroids indicates that they can come from various directions relative to Earthâ€™s orbital plane.

**Perihelion Distance Observation:** Hazardous asteroids tend to have a smaller perihelion distance. Explanation: A smaller perihelion distance means the asteroid gets closer to the sun, and potentially closer to Earthâ€™s orbit, increasing the likelihood of being classified as hazardous.

**Aphelion Dist Observation:** Hazardous asteroids also tend to have a smaller aphelion distance. Explanation: A smaller aphelion distance means the asteroidâ€™s orbit is closer to the sun throughout its entire orbit, again potentially bringing it closer to Earth.

**Mean Motion Observation:** The distribution seems quite similar for both hazardous and non-hazardous asteroids. Explanation: Mean motion is the average motion of the asteroid. The similar distribution indicates that mean motion might not be a significant factor in determining whether an asteroid is hazardous.



### Question : 2 : Does the impact of Perihelion Distance vary with the absolute magnitude.

<P>**Explination:** Observing variations in impact based on Perihelion Distance and Absolute Magnitude, we have identified this question to delve into the specifics of how these two factors are related.
<P>


```{r, include=TRUE, echo=FALSE, results='asis'}

ggplot(Ast_Subset, aes(x = `Perihelion.Distance`, y = `Absolute.Magnitude`, color = Hazardous)) +
  geom_point(alpha = 0.6) +
  labs(title = "Perihelion Distance vs. Absolute Magnitude", x = "Perihelion Distance", y = "Absolute Magnitude") +
  theme_minimal()

```
Perihelion Distance vs. Absolute Magnitude Description: This plot illustrates how the brightness of an asteroid (in terms of absolute magnitude) relates to its perihelion distance, which is the closest point in its orbit to the Sun. Potential Insight: Hazardous asteroids might tend to have smaller perihelion distances, indicating they come closer to the Sun (and potentially Earthâ€™s orbit). Brighter asteroids (with lower absolute magnitude) might be more easily detected, and their orbits more precisely determined, leading to a higher likelihood of being classified as hazardous if they come close to Earth.


### Question : 3 : Is there any significant difference in the orbit uncertainty, Mean Motion, and inclination with a change in Perihelion Distance? <br> - Reason: Here we are examining the relationship between orbit uncertainty, mean motion, and inclination and perihelion distance (also a numeric variable). <br>

```{r , include=TRUE, echo=FALSE, results='show'}

# Perform ANOVA for 'OrbitUncertainty' with 'PerihelionDistance'
orbitU_perihelionDist_anova <- aov(`Orbit.Uncertainity` ~ `Perihelion.Distance`, data = Ast_raw)
summary(orbitU_perihelionDist_anova)

# Perform ANOVA for 'MeanMotion' with 'PerihelionDistance'
meanM_perihelionDist_anova <- aov(`Mean.Motion` ~ `Perihelion.Distance`, data = Ast_raw)
summary(meanM_perihelionDist_anova)

# Perform ANOVA for 'Inclination' with 'PerihelionDistance'
inclination_perihelionDist_anova <- aov(Inclination ~ `Perihelion.Distance`, data = Ast_raw)
summary(inclination_perihelionDist_anova)

```

**Test 1 - Orbit Uncertainty vs. Perihelion Distance:**

-   Df (Degrees of Freedom): There is 1 degree of freedom associated with Perihelion Distance, and 3690 degrees of freedom for residuals.
-   Sum Sq (Sum of Squares): The sum of squares for Perihelion Distance is 381, and for residuals, it's 35756.
-   Mean Sq (Mean Square): The mean square for Perihelion Distance is 381.
-   F value: The F-statistic is 39.4.
-   Pr(\>F): The p-value is approximately 3.9e-10, which is extremely small.

**Interpretation:** In this test, the p-value (Pr(\>F)) is very small (3.9e-10), which indicates that there is a statistically significant difference in "Orbit Uncertainty" with a change in "Perihelion Distance." This suggests that "Perihelion Distance" has a significant impact on "Orbit Uncertainty."

**Test 2 - Mean Motion vs. Perihelion Distance:**

-   Df: 1 degree of freedom for Perihelion Distance and 3690 degrees of freedom for residuals.
-   Sum Sq: The sum of squares for Perihelion Distance is 133, and for residuals, it's 276.
-   Mean Sq: The mean square for Perihelion Distance is 133.
-   F value: The F-statistic is 1777.
-   Pr(\>F): The p-value is less than 2e-16, which is extremely small.

**Interpretation:** In this test, the p-value is also very small (much less than 0.001), indicating a highly significant difference in "Mean Motion" with a change in "Perihelion Distance." Thus, "Perihelion Distance" significantly affects "Mean Motion."

**Test 3 - Inclination vs. Perihelion Distance:**

-   Df: 1 degree of freedom for Perihelion Distance and 3690 degrees of freedom for residuals.
-   Sum Sq: The sum of squares for Perihelion Distance is 1681, and for residuals, it's 447526.
-   Mean Sq: The mean square for Perihelion Distance is 1681.
-   F value: The F-statistic is 13.9.
-   Pr(\>F): The p-value is 2e-04, which is relatively small.

**Interpretation:** In this test, the p-value (Pr(\>F)) is smaller than 0.05, indicating a significant difference in "Inclination" concerning changes in "Perihelion Distance." It implies that "Perihelion Distance" has a statistically significant effect on "Inclination," though the significance is not as strong as in the previous tests.

In summary, based on these ANOVA tests, it appears that "Perihelion Distance" has a significant impact on "Orbit Uncertainty," "Mean Motion," and "Inclination," with "Mean Motion" having the most substantial effect, followed by "Orbit Uncertainty" and then "Inclination." The p-values for all three tests suggest that the relationships are statistically significant.




### Question : 4 : What are the most influential features in predicting whether an asteroid is hazardous ? 

Now to identify the most influential features the impacted the target column, we had two main choices. One, finding out which predictor variables have a high correlation with the target variable and next training a classification model and assess the feature importance scores generated by the model to identify the most influential features for predicting the asteroid hazard.

We had to discard the first, correlation approach, because the target variable "Hazardous" is a binary categorical variable, and the correlation between binary variables and continuous variables isn't that meaningful.

So, we went ahead with the latter approach. we decided to train a random forest model and get the feature importance scores generated by the model to find out the most influential features. 

We decided to use a Random Forest model to determine feature importance in our case for the following reasons:

1. **Non-linearity Handling:** Random Forest is effective at capturing complex, non-linear relationships in the data. In the context of asteroid hazard prediction, the relationship between various features and the target variable ("Hazardous") is non-linear.

2. **Feature Importance:** Random Forest provides a straightforward way to calculate feature importance. It measures the contribution of each predictor variable in reducing impurity or increasing the Gini index.

3. **Outlier Robustness:** Random Forest is robust to outliers and noisy data, which can be important when working with astronomical datasets like this one.

4. **Variable Types:** Random Forest can handle a mix of categorical and numeric predictor variables.


```{r, include=TRUE, echo=FALSE, results='show'}

# Install the following package (if not already)
# install.packages("randomForest")

library(randomForest)

# Splitting the dataset into predictors (X) excluding the target variable
X <- select(Ast_Subset, -c(Hazardous))
Y <- Ast_raw$Hazardous

# Fitting a Random Forest model to determine feature importance
set.seed(123)  # Setting a seed for reproducibility
rf_model <- randomForest(X, Y, ntree = 1000)

# Getting the feature importance
importance <- importance(rf_model)

# Printing importance
print(importance)

library(ggplot2)

# Get feature importance as a data frame
importance_df <- as.data.frame(importance(rf_model))

# Create a custom feature importance plot
ggplot(importance_df, aes(x = reorder(rownames(importance_df), -MeanDecreaseGini), y = MeanDecreaseGini)) +
  geom_bar(stat = "identity", fill = "skyblue") +
  labs(x = "Features", y = "Mean Decrease in Gini Index") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  ggtitle("Feature Importance in Asteroid Hazard Prediction")

```

Based on the feature importance values from the Random Forest model:

1. **Influential Features**:
   - The "Inclination" and "Perihelion.Distance" features have the highest feature importance scores, with values of 124.4 and 130.1, respectively. This suggests that these two features significantly impact the model's ability to classify asteroids as hazardous or not.

2. **Moderate Importance**:
   - Features like "Absolute.Magnitude," "Est.Dia.in.KM.min.," "Est.Dia.in.KM.max.," "Relative.Velocity.km.per.sec," "Jupiter.Tisserand.Invariant," "Eccentricity," "Semi.Major.Axis," and "Mean.Motion" also have importance scores above 50. These features contribute meaningfully to the model's predictions.

3. **Low Importance**:
   - The features "Neo.Reference.ID," "Name," "Orbit.Uncertainty," and "Aphelion.Dist" have relatively lower importance scores, all below 55. These features appear to have less influence on the model's decision-making process.























